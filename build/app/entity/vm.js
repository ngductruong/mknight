define(["durandal/app","knockout"],function(e,t){return function(){var e=this;return e.CurrentContext=t.observable(),e.CurrentViewModel=t.observable(),e.CurrentSearchString=t.observable(),e.ConnectionId=t.observable(),e.CurrentUser=t.observable(null),e.Units=t.observableArray(),e.SystemUnits=t.observableArray(),e.UploadUnits=t.observableArray(),e.DefaultUnitOfUser=t.observable(),e.AllUser=t.observableArray(),e.DirectoryArray=t.observableArray(),e.AddDirectory=function(t){e.DirectoryArray().push(t)},e.UnitArray=t.observableArray(),e.AddUnit=function(t){e.UnitArray().push(t)},e.LoadingSteps=t.observableArray([]),e.LoadedSteps=t.observableArray([]),e.CompleteStep=function(r){var a=e.LoadingSteps()[r];if(a){a.Finish();var n=t.utils.arrayFirst(e.LoadedSteps(),function(e){return e.StepName()==a.StepName()});n||e.LoadedSteps.push(a)}},e.LoadingState=t.computed(function(){if(e.LoadedSteps().length>=0){for(var t=null,r=e.LoadingSteps().length-1;r>=0;r--){var a=e.LoadingSteps()[r];a.IsFinish()&&(t=a);break}return t?t.StepName():e.LoadingSteps().length>0?(t=e.LoadingSteps()[0],t.StepName()):"Xử lý dữ liệu"}}),e.LoadingIndicator=t.observable(4),e.LoadingPercentage=t.computed(function(){var r=1e3,a=400;return e.LoadedSteps().length>0&&t.utils.arrayForEach(e.LoadedSteps(),function(e){e&&(a+=e.Value())}),console.log("LOADING | "+a+"/"+r),(100*(a/r)).toFixed(0)+"%"}),e.LoadingMonitorAction=t.computed(function(){e.LoadedSteps().length>0&&e.LoadedSteps().length==e.LoadingSteps().length&&console.log("---------------FINISH LOADING---------------------")}),e.Session=t.observable(),e.NewSessionResultIncomingArray=t.observableArray(),e.NewSessionResultOutgoingArray=t.observableArray(),e.NewSessionResultSharingArray=t.observableArray(),e.SessionResultDashboardArray=t.observableArray(),e.SessionResultIncomingArray=t.observableArray(),e.SessionResultOutgoingArray=t.observableArray(),e.PreTransferFileArray=t.observableArray(),e.TransferingFileArray=t.observableArray(),e.DownloadFileArray=t.observableArray(),e.StartDate=t.observable(new Date),e.WriteDate=function(e){var t=e,r=t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" @ "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();return r},e.WriteOperationTime=function(t){var r=new Date,a=Math.abs(r-e.StartDate());console.log("------------OPERATION TIME FOR : "+t+"-------------------"),console.log("Start at : "+e.WriteDate(e.StartDate())),console.log("Time span : "+a+" ms"),console.log("---------------------------------------------")},e}});